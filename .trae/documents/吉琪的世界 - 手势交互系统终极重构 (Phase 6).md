# 吉琪的世界 (JiQi's World) - 手势交互系统终极重构 (Phase 6)

根据您提出的 7 点详细优化要求，我制定了以下全面的重构计划。我们将从根本上解决手势误触、识别不稳以及交互逻辑僵硬的问题。

## 1. 核心手势逻辑重构 (Gesture Core Refactoring)
*   **状态机引入 (State Machine)**: 废弃简单的 `if-else` 判断，为核心手势（特别是 `THUMB_UP`）引入 **Trigger-Lock-Reset (触发-锁定-重置)** 状态机。
    *   **机制**: 只有当手势消失超过 **300ms** (Reset Threshold) 后，状态才会重置。这意味着即使识别过程中出现短暂的闪烁，也不会导致布局反复切换。
*   **增强型防抖 (Smart Debounce)**:
    *   **时间窗**: 不再单纯依赖帧数，而是结合时间戳。确认一个手势需要它稳定存在至少 **100ms**。
    *   **平滑过渡**: 确保手势切换时不会产生突兀的跳变。

## 2. 交互体验升级 (UX Enhancement)
*   **布局切换优化**:
    *   **"一次一触发"**: 竖起大拇指时，立即切换一次布局，然后进入锁定状态。无论您保持大拇指多久，都不会再次切换，直到您放下手并再次举起。
*   **自动旋转提速**:
    *   将基础旋转速度提升 30%，并确保在 OrbitControls 接管时平滑过渡。
*   **光标与点击优化**:
    *   **显式 POINT 状态**: 只要手出现在画面中且未触发其他手势，即显式进入 `POINT` (光标模式)，消除 UI 上的 `NONE` 困惑。
    *   **捏合逻辑**: 优化 `PINCH` 的触发阈值，配合之前的 "Freeze" 算法，确保点击动作如鼠标般精准。

## 3. 性能与反馈 (Performance)
*   **资源清理**: 再次确认 Webcam 资源的释放逻辑，确保无内存泄漏。
*   **视觉反馈**: 优化 UI 提示，当前手势状态将以更醒目的颜色和动画展示。

---

**执行步骤**:
1.  **GestureHandler**:
    *   实现 `Trigger-Lock-Reset` 状态机。
    *   重构 `onGesture` 回调逻辑，分离实时数据（光标/缩放）与离散事件（点击/切换）。
2.  **GestureLogic**:
    *   添加显式的 `POINT` 手势识别。
    *   微调 Pinch 阈值。
3.  **App**:
    *   调整 `rotationSpeed` 参数。
    *   适配新的手势事件回调。

请确认是否执行此重构计划。
